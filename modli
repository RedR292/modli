#!/bin/bash
## Prototype of modli cli and mod manager.
## Written by John "Red" Richardson
## 15/11/2025
##################USAGE##################
##modli [OPTIONS] [GAME] [FILE]	
. .env
. $root/functions
if [[ "$#" -eq 0 ]]; then
	. $root/help
	exit 1	
fi

##The passed command
cmd=$1
#The name of the game being modded and the path where your games are stored.
if [[ ! -z "$2" ]]; then
	GAME_NAME="$2"
	GAMEPATH="$GAMES/$GAME_NAME"
fi

#The mod or script, if one was passed
if [[ ! -z "$3" ]]; then
	MOD="$3"
fi

#These are utility functions, they improve modli's usability and readability
case "$cmd" in
    --Manage|--Unmanage)
        . "$root/Games/config" "$cmd"
        exit
        ;;

    -h)
        . $root/help "$GAME_NAME"
        exit
        ;;

    -c)
        checkNewGames
        exit
        ;;

    -C)
        checkGames
        exit
        ;;

    -m)
        checkAvailableMods
        exit
        ;;

    -M)
        checkInstalledMods
        exit
        ;;

    *) ##Everything else gets passed to the mod manager
	. $root/ModManagers/"$GAME_NAME.mm"
        ;;
esac
